/*******************************************************************************
 * Copyright (c) 2014-2015 BSI Business Systems Integration AG.
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *     BSI Business Systems Integration AG - initial API and implementation
 ******************************************************************************/
@outline-breadcrumb-border-color: @outline-selection-background-color;
@outline-title-border-color: @outline-selection-background-color;
@outline-title-margin-left: 12px;
@outline-title-margin-right: 12px;
@outline-title-margin-bottom: 12px;
@mobile-outline-title-text-padding-left: 16px;

.outline {

  &.in-background > .tree-data > .tree-node.selected {
    background-color: @outline-in-background-selection-background-color;
    color: @palette-white;
  }

  & > .tree-data  {
    & > .scrollbar {
      &.y-axis {
        margin-right: 6px;
      }

      & > .scrollbar-thumb {
        background-color: fade(@scrollbar-thumb-inverted-color, 30%);
      }

      & > .scrollbar-thumb-move,
      & > .scrollbar-thumb:hover {
        background-color: fade(@scrollbar-thumb-inverted-color, 60%);
      }
    }

    & > .key-box {
      top: 7px !important;
    }

    & > .tree-node,
    & > .animation-wrapper > .tree-node {
      #scout.font-text-plus();
      cursor: pointer;
      border: 0;

      /* leave some space for the scrollbar */
      padding-right: 8px;
      /* set top/bottom padding for item */
      padding-top: 8px;
      padding-bottom: 8px;

      & > .menubar {
        border: 0;
        padding-top: 10px;
        background-color: @outline-selection-background-color;
      }

      &.group {
        background-color: @outline-group-background-color;
      }

      &.selected {
        color: @outline-selection-color;
        background-color: @outline-selection-background-color;
        border: 0;
      }

      & > .tree-node-control {
        /* adjust control position */
        margin-left: -@outline-node-control-size - 5px;
        margin-top: -3px;

        width: @outline-node-control-size;
        height: @outline-node-control-size;
        line-height: @outline-node-control-size;

        &::before {
          font-size: @outline-node-control-size;
          /* always use same color as the tree-node label */
          color: inherit;
        }

        &:hover::before {
          color: @highlight-color;
        }
      }
    }
  }
}

.outline-title {
  #scout.font-text-large();
  #scout.overflow-ellipsis-nowrap();
  margin: 0 @outline-title-margin-right @outline-title-margin-bottom @outline-title-margin-left;
  border-bottom: 1px solid @outline-title-border-color;

  & > .key-box {
    top: 19px;
  }

  & > .menubar {
    display: block;
    background-color: @navigation-background-color;
    width: auto;
    position: absolute;
    right: @outline-title-margin-right;
    top: @outline-title-margin-bottom;
    border: none;
    color: @navigation-color;

    & > .menubox > .menu-item:not(.disabled) {
      color: @navigation-color;
    }

    & > .menubox > .menu-item:not(.menu-textandicon):focus::after  {
      #scout.focus-border-inverted();
    }
  }
}

.outline-title-text {
  padding: 21px 2px 13px 6px;
  cursor: pointer;
  display: block;
  width: auto;
}

/* bread crumb style (different colors and bigger font and arrow than original breadcrumb style) */
.outline.tree.breadcrumb {

  & > .outline-title {
    text-align: center;
    margin: 0;
  }

  & > .tree-data {
    & > .tree-node,
    & > .animation-wrapper > .tree-node {
      border-bottom: 1px solid @outline-breadcrumb-border-color;

      /* !important is necessary here to override the element specific left-padding (calculated by Tree.js for level indentation). */
      padding: 12px 2px !important;

      &.ancestor-of-selected,
      &.child-of-selected,
      &.selected {
        #scout.font-text-plus();
        background-color: @outline-group-background-color;
      }

      &.selected {
        background-color: @outline-selection-background-color;
        color: @outline-selection-color;
        cursor: default;
      }

      &.ancestor-of-selected::before {
        border-top-color: @outline-selection-background-color;
        border-width: 8px 13px 0 13px;
        bottom: -9px;
      }

      &.ancestor-of-selected::after {
        border-top-color: @outline-group-background-color;
        border-width: 8px 13px 0 13px;
        bottom: -8px;
      }

      &.selected::before {
        border-top-color: @outline-selection-background-color;
        border-width: 8px 13px 0 13px;
        bottom: -8px;
      }

      &.selected::after {
        border: 0;
      }
    }
  }

  &:focus > .tree-data,
  &.focused > .tree-data {
    & > .tree-node,
    & > .animation-wrapper > .tree-node {

      &.parent-of-selected {
        border-color: @outline-breadcrumb-border-color;
      }

      &.parent-of-selected::before {
        border: 0;
      }

      &.selected {
        border-color: @outline-breadcrumb-border-color;
      }

      &.selected::before {
        border-top-color: @outline-selection-background-color;
      }
    }
  }
}

.mobile.outline.breadcrumb {
  & > .outline-title {
    text-align: left;

    & > .outline-title-text {
      padding-left: @mobile-outline-title-text-padding-left;
    }
  }

  & > .tree-data > .tree-node  {
    text-align: left;
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
}
