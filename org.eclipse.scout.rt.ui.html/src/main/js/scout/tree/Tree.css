.tree {
  position: relative;
  height: 100%;
  width: 100%;

  &:focus {
    & .tree-node.selected {
      background-color: @item-selection-background-color;
      border-color: @item-selection-border-color;
    }

    /*first child is the scrollbar*/
    .tree-node:nth-of-type(1).selected {
      border-top-color: @item-selection-nonfocus-background-color;
    }

  }

  & .menubar {
    padding: 0 8px;
  }
}

.tree-data {
  /* necessary for scrollbars */
  position: relative;
  overflow: hidden;
  width: 100%; /* expand to outer container, needed for breadcrumb */
}

.navigation-breadcrumb .tree-data {
  float: left;
}

.tree-node {
  display: block;
  position: relative;
  .overflow-ellipsis-nowrap;
  border: 1px solid transparent;
  border-left: 0px solid transparent;
  border-right: 0px solid transparent;
  padding: 6px;

  &.selected {
    background-color: @item-selection-nonfocus-background-color;
    border-color: @item-selection-nonfocus-border-color;
    border-left-color: transparent;
    border-right-color: transparent;
  }

  &.hidden {
    display: none;
  }

  &.disabled {
    color: @disabled-color;
  }

  /*first child is the scrollbar*/
  &:nth-of-type(1).selected {
    border-top-color: @item-selection-nonfocus-background-color;
  }
}

.tree-node-checkbox {
  display: block;
  position: absolute;
  top: auto;
  left: auto;
  margin-top: -2px;
  margin-left: -@tree-node-checkbox-size - 4px;
  width: @tree-node-checkbox-size;
  height: @tree-node-checkbox-size;

  & div {
    cursor: pointer;
    display: inline-block;
    position: relative;
    font-size: 13px;
  }

  & div::before {
    .checkboxLabelBefore(0px, 0px, 0px, 0px, -12px);
  }

  & div.disabled:hover::before {
    .checkboxLabelBeforeDisabledBorder;
  }

  & div.checked::before {
    .checkboxLabelBeforeChecked;
  }

  & div::before {
    .checkboxLabelBeforeBorder;
  }

  & div.childrenChecked::before {
    .checkboxLabelBeforeChildChecked;
  }

  & div.disabled::before {
    .checkboxLabelBeforeDisabled;
  }

  & div.disabled {
    .checkboxLabelDisabled;
  }
}

.tree-node-control {
  display: block;
  position: absolute;
  top: auto;
  left: auto;
  transition: transform 0.3s;
  cursor: pointer;

  /* adjust control position */
  margin-left: -@tree-node-control-size - 2px;
  margin-top: -1px;

  /* for good animation, ensure that the control is a square and the icon is centered */
  width: @tree-node-control-size;
  height: @tree-node-control-size;
  line-height: @tree-node-control-size;
  text-align: center;

  &::before {
    .font-icon;
    font-size: @tree-node-control-size;
    content: @icon-angle-right;
    color: @border-color;

    .tree-node.leaf > & {
      content: '';
    }

    .tree-node.show-all > & {
      .font-text-normal;
      content: '+';
    }

    .tree-node-control:hover::before {
      color: @hover-color;
    }
  }

  .tree-node.expanded > & {
    /* This "imprecise" angle is a workround for firefox to prevent shifting the div a little when the animation finishes. */
    /* See https://bugzilla.mozilla.org/show_bug.cgi?id=739176 */
    .transform(rotate(89.99deg));
  }

  &.checkable {
    margin-left: -@tree-node-control-checkbox-size - 8px;
  }
}

/* key handling */

.tree-node .key-box {
  top: calc(~"50%" - 8px);
}
