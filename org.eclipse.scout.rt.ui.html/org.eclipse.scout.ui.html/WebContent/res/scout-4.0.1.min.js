Scout={};var log=console.log.bind(console);(function(a){a.makeDiv=function(b,e,d){b=b?' id="'+b+'"':"";e=e?' class="'+e+'"':"";d=d||"";return a("<div "+b+e+">"+d+"</div>")};a.fn.prependDiv=function(b,e,d){return a.makeDiv(b,e,d).prependTo(this)};a.fn.appendDiv=function(b,e,d){return a.makeDiv(b,e,d).appendTo(this)};a.fn.afterDiv=function(b,e,d){return a.makeDiv(b,e,d).insertAfter(this)};a.fn.beforeDiv=function(b,e,d){return a.makeDiv(b,e,d).insertBefore(this)};a.fn.appendSVG=function(d,b,g,e){var f=a(document.createElementNS("http://www.w3.org/2000/svg",d));if(b){f.attr("id",b)}if(g){f.attr("class",g)}if(e){f.html(e)}return f.appendTo(this)};a.fn.attrSVG=function(b,c){return this.each(function(){this.setAttribute(b,c)})};a.fn.attrXLINK=function(b,c){return this.each(function(){this.setAttributeNS("http://www.w3.org/1999/xlink","xlink:"+b,c)})};a.fn.addClassSVG=function(b){return this.each(function(){if(!a(this).hasClassSVG(b)){var c=this.getAttribute("class");this.setAttribute("class",c+" "+b)}})};a.fn.removeClassSVG=function(b){return this.each(function(){var c=" "+this.getAttribute("class")+" ";this.setAttribute("class",c.replace(" "+b+" "," "))})};a.fn.hasClassSVG=function(d){var b=" "+this.attr("class")+" ";return b.indexOf(" "+d+" ")>-1};a.fn.selectOne=function(){this.siblings().removeClass("selected");this.addClass("selected");return this};a.fn.select=function(b){if(b){this.addClass("selected")}else{this.removeClass("selected")}return this};a.fn.animateAVCSD=function(b,g,c,f,h){var e={},d={};e[b]=g;if(c){d.complete=c}if(f){d.step=f}if(h){d.duration=h}this.animate(e,d);return this};a.fn.animateSVG=function(c,b,e,d){return this.each(function(){var f=parseFloat(a(this).attr(c));a(this).animate({tabIndex:0},{step:function(g,h){this.setAttribute(c,f+(b-f)*h.pos)},duration:e,complete:d,queue:false})})};a.fn.widthToContent=function(){var c=this.outerWidth(),d=this.css("width","auto").outerWidth(),b=this.data("finalWidth");if(d!=c){this.css("width",c)}if(d!=b){this.stop().animateAVCSD("width",d,null,function(){a(this).data("finalWidth",null)});this.data("finalWidth",d)}return this};a.removeThis=function(){a(this).remove()};a.DEC=".";a.GROUP="'";a.DATE=["dd","mm","yyyy"];a.DATE_SEP=".";a.WEEKDAY=["Mo","Di","Mi","Do","Fr","Sa","So"];a.WEEKDAY_LONG=["Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag","Sonntag"];a.MONTH=["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"];a.MONTH_LONG=["Januar","Februar","MÃ¤rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"];a.numberToString=function(f,c){var d=String(f.toFixed(c));split=d.split(".").join(a.DEC);var g=d.indexOf(a.DEC);var b=d.indexOf("-");g=(g==-1?d.length:g);b=(b==-1?0:1);for(var e=g-3;e>b;e-=3){d=d.substr(0,e)+a.GROUP+d.substr(e)}return d};a.stringToDate=function(c){var e=c.split(a.DATE_SEP);var f=parseInt(e[a.DATE.indexOf("dd")],10);var b=parseInt(e[a.DATE.indexOf("mm")],10);var g=parseInt(e[a.DATE.indexOf("yyyy")],10);return new Date((g<100?g+2000:g),b-1,f)};a.dateToString=function(e){var f=e.getDate(),b=e.getMonth()+1,g=e.getFullYear();var c=a.DATE.join(a.DATE_SEP);return c.replace("dd",(f<=9?"0"+f:f)).replace("mm",(b<=9?"0"+b:b)).replace("yyyy",g)}}(jQuery));Scout.Session=function(a,e){this.widgetMap={};this.syncAjax=function(h,k,j){if(!j){j={}}j.type_=h;j.id=k;j.sessionPartId=e;var g="http://localhost:8082/json";var f;$.ajax({async:false,type:"POST",dataType:"json",cache:false,url:g,data:JSON.stringify(j),success:function(l){f=l}});return f};this.processEvents=function b(g){var f=this;$.each(g,function(h,j){if(j.type_=="create"){if(j.parentId===undefined){d(f,a,j)}else{var k=f.widgetMap[j.parentId];if(k){k.onModelCreate(j)}else{log("ERROR: No widget found for parentId "+j.parentId)}}}else{if(j.type_=="propertyChange"){var k=f.widgetMap[j.id];if(k){k.onModelPropertyChange(j)}else{log("ERROR: No widget found for id "+j.id)}}else{var k=f.widgetMap[j.id];if(k){k.onModelAction(j)}else{log("ERROR: No widget found for id "+j.id)}}}})};this.init=function c(){var f=this.syncAjax("startup",a.attr("id"));this.processEvents(f.events)};function d(f,h,g){if(g.objectType=="Desktop"){return new Scout.Desktop(f,h,g)}return undefined}};Scout.Desktop=function(j,e,g){j.widgetMap[g.id]=this;var l,h,m,b;var l=new Scout.DesktopViewButtonBar(j,e,g.viewButtons);var h=new Scout.DesktopToolButton(j,e,g.toolButtons);var m=new Scout.DesktopTree(j,e);var b=new Scout.DesktopBench(j,e);m.outlineId=g.outline.id;m.addNodes(g.outline.pages);$(window).keydown(function(n){if(n.which==18){a();k()}});$(window).keyup(function(n){if(n.which==18){a();return false}});$(window).blur(function(n){a()});var f={};if(h){$(".tool-item",h.$div).each(function(o,p){var n=parseInt($(p).attr("data-shortcut").replace("F",""))+111;f[n]=p})}$(window).keydown(function(q){if(q.which>=49&&q.which<=57){$(".view-item",l.$div).eq(q.which-49).click()}if(f[q.which]){$(f[q.which]).click();return false}if(q.which==37){$(".selected",m.$div).prev().click();a();return false}if(q.which==39){$(".selected",m.$div).next().click();a();return false}if(q.which==109||q.which==107){$(".selected",m.$div).children(".tree-item-control").click();a();return false}if([38,40,36,35,33,34].indexOf(q.which)>-1){var s=$(".table-row",b.$div),p=$(".row-selected",b.$div),t;if(q.which==38){if(p.length>0){t=p.first().prev()}else{t=s.last()}}if(q.which==40){var n=$(".row-selected",b.$div);if(p.length>0){t=p.last().next()}else{t=s.first()}}if(q.which==36){t=s.first()}if(q.which==35){t=s.last()}if(q.which==33){if(p.length>0){var o=p.first().prevAll();if(o.length>10){t=o.eq(10)}else{t=s.first()}}else{t=s.last()}}if(q.which==34){if(p.length>0){var o=p.last().nextAll();if(o.length>10){t=o.eq(10)}else{t=s.last()}}else{t=s.first()}}t.trigger("mousedown").trigger("mouseup")}});this.onModelAction=d;this.onModelPropertyChange=c;function c(n){}function d(n){if(n.type_=="outlineChanged"){m.outlineId=n.outline.id;m.clearNodes();m.addNodes(n.outline.pages);return}}function a(){$(".key-box").remove();$(".tree-item-control").show()}function k(){$(".view-item",l.$div).each(function(q,s){if(q<9){$(s).appendDiv("","key-box",q+1)}});if(h){$(".tool-item",h.$div).each(function(q,s){$(s).appendDiv("","key-box",$(s).attr("data-shortcut"))})}var p=$(".selected",m.$div),o=p.prev(),n=p.next();if(p.hasClass("can-expand")){if(p.hasClass("expanded")){p.appendDiv("","key-box large","-")}else{p.appendDiv("","key-box large","+")}p.children(".tree-item-control").hide()}if(o){o.appendDiv("","key-box","â†?");o.children(".tree-item-control").hide()}if(n){n.appendDiv("","key-box","â†’");n.children(".tree-item-control").hide()}var p=$("#TableData",b.$div);if(p){p.appendDiv("","key-box top3","Home");p.appendDiv("","key-box top2","PgUp");p.appendDiv("","key-box top1","â†‘");p.appendDiv("","key-box bottom1","â†“");p.appendDiv("","key-box bottom2","PgDn");p.appendDiv("","key-box bottom3","End")}}};Scout.DesktopBench=function(a,c){var b=c.appendDiv("DesktopBench");this.$div=b};Scout.DesktopMatrix=function(c,e){var d=[],b=[];this.addData=h;this.addAxis=g;this.calculateCube=a;this.columnCount=f;function h(k,l){var j=[];d.push(j);j.column=k;j.format=function(m){return $.numberToString(m,0)};if(l==-1){j.norm=function(m){return 1};j.group=function(m){return m.length}}else{if(l==1){j.norm=function(m){return parseFloat(m)};j.group=function(m){return m.reduce(function(o,n){return o+n})}}else{if(l==2){j.norm=function(m){return parseFloat(m)};j.group=function(m){return m.reduce(function(o,n){return o+n})/m.length}}}}return j}function g(j,l){var k=[];b.push(k);k.column=j;k.normTable=[];k.add=function(m){if(k.indexOf(m)==-1){k.push(m)}};k.reorder=function(){k.sort()};if(c[j].type=="date"){if(l===0){k.norm=function(m){return $.stringToDate(m).getTime()};k.format=function(m){return $.dateToString(new Date(m))}}else{if(l===1){k.norm=function(m){return($.stringToDate(m).getDay()+6)%7};k.format=function(m){return $.WEEKDAY_LONG[m]}}else{if(l===2){k.norm=function(m){return $.stringToDate(m).getMonth()};k.format=function(m){return $.MONTH_LONG[m]}}else{if(l===3){k.norm=function(m){return $.stringToDate(m).getFullYear()};k.format=function(m){return String(m)}}}}}}else{if(c[j].type=="int"){k.norm=function(m){return parseInt(m,10)};k.format=function(m){return $.numberToString(m,0)}}else{if(c[j].type=="float"){k.norm=function(m){return parseFloat(m)};k.format=function(m){return $.numberToString(m,0)}}else{k.norm=function(n){var m=k.normTable.indexOf(n);if(m==-1){return k.normTable.push(n)-1}else{return m}};k.format=function(m){return k.normTable[m]};k.reorder=function(){log("TODO")}}}}return k}function a(){var n={},j,t,o,p;for(j=0;j<e.length;j++){var w=[];for(o=0;o<b.length;o++){key=e[j][b[o].column];normKey=b[o].norm(key);b[o].add(normKey);w.push(normKey)}w=JSON.stringify(w);var u=[];for(t=0;t<d.length;t++){p=e[j][d[t].column];normData=d[t].norm(p);u.push(normData)}if(n[w]){n[w].push(u)}else{n[w]=[u]}}for(t=0;t<d.length;t++){p=d[t];p.total=0;p.min=null;p.max=null;for(o in n){if(n.hasOwnProperty(o)){var s=n[o],l=[];for(i=0;i<s.length;i++){l.push(s[i][t])}var m=d[t].group(l);n[o][t]=m;p.total+=m;if(m<p.min||p.min===null){p.min=m}if(m>p.max||p.min===null){p.max=m}}}var q=Math.ceil(Math.log(p.max)/Math.LN10)-1;p.max=Math.ceil(p.max/Math.pow(10,q))*Math.pow(10,q);p.max=Math.ceil(p.max/4)*4}for(o=0;o<b.length;o++){key=b[o];key.min=Math.min.apply(null,key);key.max=Math.max.apply(null,key);key.reorder()}n.getValue=function(k){k=JSON.stringify(k);if(n.hasOwnProperty(k)){return n[k]}else{return null}};return n}function f(){var k=[];for(var l=0;l<c.length;l++){k.push([l,[]]);if(c[l].type!="key"){for(r=0;r<e.length;r++){var j=e[r][l];if(k[l][1].indexOf(j)==-1){k[l][1].push(j)}}k[l][1]=k[l][1].length}}return k}};Scout.DesktopTable=function(V,d,c){var g="Spaltenverwaltung",b="schliessen";var a=d.appendDiv("DesktopTable"),m=a.appendDiv("TableHeader"),H=a.appendDiv("TableData"),q=a.appendDiv("TableFooter"),O=a.appendDiv("TableControl");var o=H.appendDiv("TableDataScroll");scrollbar=new Scout.Scrollbar(o,"y");var C=O.appendDiv("ControlResizeTop"),x=O.appendDiv("ControlResizeBottom");var W=O.appendDiv("ControlChart"),N=O.appendDiv("ControlGraph"),B=O.appendDiv("ControlMap"),M=O.appendDiv("ControlOrganize"),R=O.appendDiv("ControlLabel");var n=O.appendDiv("ControlContainer");var X=O.appendDiv("InfoSelect").on("click","",k),P=O.appendDiv("InfoFilter").on("click","",e),F=O.appendDiv("InfoMore"),L=O.appendDiv("InfoLoad").on("click","",j);$("body").on("mouseenter","#control_graph, #control_chart, #control_map, #control_organise",function(){$("#control_label").text($(this).data("label"))});$("body").on("mouseleave","#control_graph, #control_chart, #control_map, #control_organise",function(){$("#control_label").text("")});var u;var S=new Scout.DesktopTableHeader(m,c.columns);j();W.data("label",c.chart).hover(U,Y).click(v).click(K);if(c.graph){N.data("label",c.graph).hover(U,Y).click(v).click(y)}else{N.addClass("disabled")}if(c.map){B.data("label",c.map).hover(U,Y).click(v).click(Q)}else{B.addClass("disabled")}M.data("label",g).hover(U,Y).click(v).click(h);function U(Z){var aa=$(Z.target).hasClass("selected")?" "+b:"";R.text($(Z.target).data("label")+aa)}function Y(Z){R.text("")}function v(aa){var Z=$(this);C.off("mousedown");x.off("mousedown");if(Z.hasClass("selected")){Z.removeClass("selected");Z.parent().removeClass("resize-on");H.animateAVCSD("height",parseFloat(a.css("height"))-80,function(){$(this).css("height","calc(100% - 80px")},scrollbar.initThumb,500);Y(aa);O.animateAVCSD("height",50,null,null,500);aa.stopImmediatePropagation()}else{Z.selectOne();Z.parent().addClass("resize-on");H.animateAVCSD("height",parseFloat(a.css("height"))-430,function(){$(this).css("height","calc(100% - 430px")},scrollbar.initThumb,500);U(aa);n.height(340);O.animateAVCSD("height",400,null,null,500);C.on("mousedown","",J);x.on("mousedown","",J)}}function K(Z){new Scout.DesktopTableChart(V,n,c.columns,u,G)}function y(Z){new Scout.DesktopTableGraph(V,n,c)}function Q(Z){new Scout.DesktopTableMap(V,n,c,u,G)}function h(Z){new Scout.DesktopTableOrganize(V,n,c,c.columns,u)}function J(ab){$("body").addClass("row-resize").on("mousemove","",Z).one("mouseup","",aa);var ac=(this.id=="ControlResizeTop")?58:108;function Z(ae){var ad=d.outerHeight()-ae.pageY+ac;O.height(ad);H.height("calc(100% - "+(ad+30)+"px)");n.height(ad-60);scrollbar.initThumb()}function aa(ad){$("body").off("mousemove").removeClass("row-resize")}return false}function j(){var Z=V.syncAjax("table",c.outlineId,{nodeId:c.nodeId});u=Z.events[0].rows;$(".table-row").remove();s(0);l(0,false)}function s(ag){var ae="";for(var Z=ag;Z<Math.min(u.length,ag+100);Z++){var ah=u[Z];ae+='<div class="table-row">';for(var af=0;af<ah.length;af++){var ac=c.columns[af],ab=ac.width,aa=(ab===0)?"display: none; ":"width: "+ab+"px; ",ad=(ac.type=="int"||ac.type=="float")?"text-align: right; ":"";value=ah[af];if(ac.type=="int"){value=$.numberToString(parseFloat(value),0)}if(ac.type=="float"){value=$.numberToString(parseFloat(value),2)}ae+='<div style = "'+aa+ad+'">'+value+"</div>"}ae+="</div>"}$(ae).appendTo(o).on("mousedown","",A).width(S.totalWidth+4);z(Z);scrollbar.initThumb();if(Z<u.length){setTimeout(function(){s(ag+100)},0)}}function A(ab){var Z=$(ab.delegateTarget),ac=true;if(ab.ctrlKey){ac=!Z.hasClass("row-selected")}else{$(".row-selected").removeClass("row-selected")}aa(ab);$(".table-row").one("mousemove",function(ad){aa(ad)});$(".table-row").one("mouseup",function(ad){$(".table-row").unbind("mousemove")});function aa(ae){var ad=Z.index(),ai=$(ae.delegateTarget).index();var ah=Math.min(ad,ai),ag=Math.max(ad,ai)+1;var af=$(".table-row",H).slice(ah,ag);if(ac){af.addClass("row-selected")}else{af.removeClass("row-selected")}T();I(ae.pageX,ae.pageY)}}function T(){$(".select-middle, .select-top, .select-bottom, .select-single").removeClass("select-middle select-top select-bottom select-single");$rowSelected=$(".row-selected");$rowSelected.each(function(ab){var aa=$(this).prevAll(":visible:first").hasClass("row-selected"),Z=$(this).nextAll(":visible:first").hasClass("row-selected");if(aa&&Z){$(this).addClass("select-middle")}if(!aa&&Z){$(this).addClass("select-top")}if(aa&&!Z){$(this).addClass("select-bottom")}if(!aa&&!Z){$(this).addClass("select-single")}});l($rowSelected.length,$rowSelected.length==u.length)}function I(Z,ac){$rowSelected=$(".row-selected");$("#MenuRow").remove();var aa=$("#MenuRow");if(aa.length===0){aa=$("body").appendDiv("MenuRow").on("click","",D)}aa.css("left",$rowSelected.first().offset().left-13).css("top",$rowSelected.first().offset().top-13);var ab=function(af){var ah=$rowSelected.first().offset().top,ad=$rowSelected.last().offset().top+32;var ae=Math.abs(ah-ac)<Math.abs(ad-ac)?ah-13:ad-13,ag=Z-13;aa.stop().animate({top:ae},{complete:function(){aa.animate({left:ag},500)}},500)};ab(event)}function D(ab){var aa=$(this),ac=c.nodeId,Z=aa.offset().left,ad=aa.offset().top;new Scout.Menu(V,c.outlineId,ac,Z,ad)}function k(){var Z=$(".row-selected",H);if(Z.length==u.length){Z.removeClass("row-selected")}else{$(".table-row",H).addClass("row-selected")}T()}function G(ab){var Z=0,ac=$(".row-selected",H),aa=$(".table-row",o);ac.removeClass("row-selected");T();aa.detach();aa.each(function(af){var ad=$(this),ae=ab(ad);if(ae){w(ad);Z++}else{E(ad)}scrollbar.initThumb()});f(Z);aa.appendTo(o);scrollbar.initThumb()}function e(Z){$(".table-row",H).each(function(aa){w($(this))});P.animateAVCSD("width",0,function(){$(this).hide()});$(".main-chart.selected").removeClassSVG("selected")}function w(Z){Z.show().animate({height:"34","padding-top":"2","padding-bottom":"2"})}function E(Z){Z.hide().animate({height:"0","padding-top":"0","padding-bottom":"0"},{complete:function(){$(this).hide()}})}function z(Z){L.html(t(Z)+" geladen</br>Daten neu laden");L.show().widthToContent()}function p(Z){}function f(Z){P.html(t(Z)+" gefiltert</br>Filter entfernen");P.show().widthToContent()}function l(aa,Z){var ab=Z?"Keine":"Alle";X.html(t(aa)+" selektiert</br>"+(Z?"Keine":"Alle")+" selektieren");X.show().widthToContent()}function t(Z){if(Z===0){return"Keine Zeile"}else{if(Z==1){return"Eine Zeile"}else{return Z+" Zeilen"}}}};Scout.DesktopTableChart=function(L,q,o,t,x){var M=["jedes Datum anzeigen","gruppiert nach Wochentag","gruppiert nach Monat","gruppiert nach Jahr"],I="Anzahl";var Q=null,v,m;var e=q.empty().appendDiv("ChartSelect");s(e);f(e);N(e);p(e);j(e);$("svg.select-chart").appendSVG("rect","","select-events").attr("width",75).attr("height",60).attr("fill","none").attr("pointer-events","all").click(function(R){z($(this).parent())}).click(K);$("svg.select-chart").first().addClassSVG("selected");var n=q.appendDiv("XAxisSelect"),y=q.appendDiv("YAxisSelect");for(var l=0;l<o.length;l++){var P=o[l];if(P.type=="key"){continue}var D=$.makeDiv("","select-axis",P.label).data("column",l);if(P.type=="date"){D.appendDiv("","select-axis-group",M[0]);D.data("group",0)}n.append(D);y.append(D.clone(true))}$(".select-axis").click(h).click(K);var w=new Scout.DesktopMatrix(o,t),d=w.columnCount(),c=function(S,R){return Math.abs(S[1]-9)-Math.abs(R[1]-9)};d.sort(c);log(d,d[0][0],d[1][0]);n.children().each(function(){if($(this).data("column")==d[0][0]){$(this).addClass("selected")}});y.children().each(function(){if($(this).data("column")==d[1][0]){$(this).addClass("selected")}});var u=q.appendDiv("DataSelect");u.appendDiv("","select-data data-count",I).data("column",-1);for(var k=0;k<o.length;k++){var O=o[k];if((O.type=="float")||(O.type=="int")){u.appendDiv("","select-data data-sum",O.label).data("column",k)}}$(".select-data").click(E).click(K);$(".select-data").first().addClass("selected");var g=q.appendSVG("svg","ChartMain").attrSVG("viewBox","0 0 1000 320").attr("preserveAspectRatio","xMinYMin");K();function s(T){var R=T.appendSVG("svg","ChartBar","select-chart");show=[2,4,3,3.5,5];for(var S=0;S<show.length;S++){R.appendSVG("rect","","select-fill").attr("x",S*14).attr("y",50-show[S]*9).attr("width",12).attr("height",show[S]*9)}}function f(U){var S=U.appendSVG("svg","ChartStacked","select-chart"),R=[2,4,3.5,5];for(var T=0;T<R.length;T++){S.appendSVG("rect","","select-fill").attr("x",0).attr("y",16+T*9).attr("width",R[T]*14).attr("height",7)}}function N(V){var T=V.appendSVG("svg","ChartLine","select-chart"),R=[0,1.7,1,2,1.5,3],S=[];for(var U=0;U<R.length;U++){S.push(2+(U*14)+","+(45-R[U]*11))}T.appendSVG("path","","select-fill-line").attr("d","M"+S.join("L"))}function p(U){var S=U.appendSVG("svg","ChartPie","select-chart"),R=[[0,0.1],[0.1,0.25],[0.25,1]];for(var T=0;T<R.length;T++){S.appendSVG("path","","select-fill-pie").attr("d",A(37,30,24,R[T][0],R[T][1]))}}function j(S){var R=S.appendSVG("svg","ChartScatter","select-chart");R.appendSVG("line","","select-fill-line").attr("x1",3).attr("y1",53).attr("x2",70).attr("y2",53);R.appendSVG("line","","select-fill-line").attr("x1",8).attr("y1",12).attr("x2",8).attr("y2",58);R.appendSVG("circle","","select-fill").attr("cx",22).attr("cy",40).attr("r",5);R.appendSVG("circle","","select-fill").attr("cx",50).attr("cy",26).attr("r",11)}function z(R){var S=R.attr("id");R.siblings().removeClassSVG("selected");R.addClassSVG("selected");if(S=="ChartScatter"){y.animateAVCSD("width",175)}else{y.animateAVCSD("width",0)}}function h(S){var R=$(this),T=R.data("group");R.siblings().animateAVCSD("height",26);if(T>=0){R.animateAVCSD("height",42);if(R.hasClass("selected")){var U=(T+1)%M.length;R.data("group",U).children(".select-axis-group").text(M[U])}}R.selectOne("selected")}function E(S){var R=$(this);if(R.hasClass("selected")){if(R.hasClass("data-sum")){R.removeClass("data-sum").addClass("data-median")}else{if(R.hasClass("data-median")){R.removeClass("data-median").addClass("data-sum")}}}R.selectOne("selected")}function K(){var X=$(".selected",e).attr("id");g.children(".main-axis, .main-axis-x, .main-axis-y").animateSVG("opacity",0,200,$.removeThis);if(Q){Q()}var U=$(".selected",n).data("column"),T=$(".selected",n).data("group");var W=$(".selected",u).data("column"),Y=$(".selected",u).hasClass("data-count"),R=$(".selected",u).hasClass("data-sum");var Z=new Scout.DesktopMatrix(o,t),V=Z.addData(W,Y?-1:(R?1:2));v=Z.addAxis(U,T);if(X=="ChartScatter"){var aa=$(".selected",y).data("column"),S=$(".selected",y).data("group");m=Z.addAxis(aa,S)}cube=Z.calculateCube();if(X=="ChartBar"){$(".select-axis",n).removeClass("axis-ver axis-around").addClass("axis-hor");J(v,V,cube)}else{if(X=="ChartStacked"){$(".select-axis",n).removeClass("axis-hor axis-around").addClass("axis-ver");F(v,V,cube)}else{if(X=="ChartLine"){$(".select-axis",n).removeClass("axis-ver axis-around").addClass("axis-hor");B(v,V,cube)}else{if(X=="ChartPie"){$(".select-axis",n).removeClass("axis-ver axis-hor").addClass("axis-around");H(v,V,cube)}else{if(X=="ChartScatter"){$(".select-axis",n).removeClass("axis-ver axis-around").addClass("axis-hor");$(".select-axis",y).addClass("axis-up");G(v,m,V,cube)}}}}}return false}function J(T,W,S){var R=Math.min(800/(T.max-T.min),60),ab=function(af){return 100+(af-T.min)*R},Y=function(af){return 280-af/(W.max-0)*240};var X=[0,W.max/4,W.max/2,W.max/4*3,W.max];for(var U=0;U<X.length;U++){var aa=X[U],ae=W.format(aa);C(ab(T.min)-10,Y(aa),ab(T.max+1)+7,Y(aa));b(ab(T.min)-20,Y(aa),"y",ae)}for(var Z=0;Z<T.length;Z++){var ad=T[Z],V=T.format(ad),ac=S.getValue([ad])[0];b(ab(ad)+R/2-1.5,Y(0)+14,"x",V);g.appendSVG("rect","","main-chart").attr("x",ab(ad)).attr("y",Y(0)).attr("width",Math.max(2,R-3)).attr("height",0).delay(200).animateSVG("height",280-Y(ac),600).animateSVG("y",Y(ac),600).attr("data-xAxis",ad).click(a)}Q=function(){g.children(".main-chart").animateSVG("height",0,200).animateSVG("y",Y(0),200,$.removeThis)}}function F(S,V,R){var ae=Math.min(240/(S.max-S.min),30),aa=function(af){return 100+af/V.max*800},X=function(af){return 50+(af-S.min)*ae};var W=[0,V.max/4,V.max/2,V.max/4*3,V.max];for(var T=0;T<W.length;T++){var Z=W[T],ad=V.format(Z);C(aa(Z),X(S.min)-10,aa(Z),X(S.max+1)+7);b(aa(Z),X(S.min)-20,"x",ad)}for(var Y=0;Y<S.length;Y++){var ac=S[Y],U=S.format(ac),ab=R.getValue([ac])[0];b(aa(0)-15,X(ac)+ae/2,"y",U);g.appendSVG("rect","","main-chart").attr("x",aa(0)).attr("y",X(ac)).attr("width",0).attr("height",Math.max(2,ae-3)).delay(200).animateSVG("width",aa(ab)-100).attr("data-xAxis",ac).click(a)}Q=function(){g.children(".main-chart").animateSVG("width",0,200,$.removeThis)}}function B(S,aa,ab){var V=function(aj){return 100+(aj-S.min)/(S.max-S.min)*800},U=function(aj){return 280-aj/(aa.max-0)*240};var ae=[0,aa.max/4,aa.max/2,aa.max/4*3,aa.max];for(var ac=0;ac<ae.length;ac++){var R=ae[ac],Y=aa.format(R);C(V(S.min)-10,U(R),V(S.max)+10,U(R));b(V(S.min)-20,U(R),"y",Y)}var af=S.max-S.min,T;if(S.length>14){T=[S.min,S.min+af/4,S.min+af/2,S.min+af/4*3,S.max]}else{T=S}for(var ad=0;ad<T.length;ad++){var W=T[ad],Z=S.format(W);C(V(W),U(0)-3,V(W),U(0)+3);b(V(W),U(0)+14,"x",Z)}for(var ag=0;ag<S.length;ag++){if(ag===0){continue}var ai=S[ag-1],ah=S[ag],X=ab.getValue([ai])[0];value2=ab.getValue([ah])[0];g.appendSVG("line","","main-chart").attr("x1",V(ai)).attr("y1",U(0)).attr("x2",V(ah)).attr("y2",U(0)).delay(200).animateSVG("y1",U(X),600).animateSVG("y2",U(value2),600)}Q=function(){g.children(".main-chart").animateSVG("y1",U(0),200).animateSVG("y2",U(0),200,$.removeThis)}}function H(S,V,R){g.appendSVG("path","ArcAxis","main-axis").attr("fill","none").attr("d","M 450 160 m 0, -110 a 110,110 0 1, 1 0,220 a 110,110 0 1, 1 0,-220");var W=0,T;for(var Y=0;Y<S.length;Y++){var aa=S[Y],U=S.format(aa),Z=R.getValue([aa])[0];T=W+Z/V.total;tweenIn=function(ac,ad){var ae=this.getAttribute("data-start"),ab=this.getAttribute("data-end");this.setAttribute("d",A(450,160,105,ae*ad.pos,ab*ad.pos))};tweenOut=function(ac,ad){var ae=this.getAttribute("data-start"),ab=this.getAttribute("data-end");this.setAttribute("d",A(450,160,105,ae*(1-ad.pos),ab*(1-ad.pos)))};g.appendSVG("path","","main-chart").attr("data-start",W).attr("data-end",T).delay(200).animate({tabIndex:0},{step:tweenIn,duration:600}).attr("data-xAxis",aa).click(a);g.appendSVG("text","","main-axis-x").appendSVG("textPath").attrSVG("startOffset",(W+T)/2*100+"%").attrXLINK("href","#ArcAxis").text(U).attr("opacity",0).delay(400).animateSVG("opacity",1,400);var X=(W+(T-W)/2)*2*Math.PI;g.appendSVG("text","","main-axis").attr("x",450+70*Math.sin(X)).attr("y",160-70*Math.cos(X)).attr("fill","#fff").text(Math.round(Z/V.total*100)+"%").attr("opacity",0).delay(600).animateSVG("opacity",1,300);W=T}Q=function(){g.children(".main-chart").animate({tabIndex:0},{step:tweenOut,complete:$.removeThis,duration:200})}}function G(T,R,ad,af){var X=function(ao){return 100+(ao-T.min)/(T.max-T.min)*700},V=function(ao){return 280-(ao-R.min)/(R.max-R.min)*240};var ak=T.max-T.min,U;if(T.length>14){U=[T.min,T.min+ak/4,T.min+ak/2,T.min+ak/4*3,T.max]}else{U=T}for(var ah=0;ah<U.length;ah++){var Y=U[ah],ac=T.format(Y);C(X(Y),V(R.max)-7,X(Y),V(R.min)+3);b(X(Y),V(R.min)+14,"x",ac)}var ai=R.max-R.min,S;if(R.length>14){S=[R.min,R.min+ai/4,R.min+ai/2,R.min+ai/4*3,R.max]}else{S=R}for(var ag=0;ag<S.length;ag++){var W=S[ag],ab=R.format(W);C(X(T.min)-10,V(W),X(T.max),V(W));b(X(T.min)-20,V(W),"y",ab)}for(var an=0;an<T.length;an++){for(var am=0;am<R.length;am++){var al=T[an],aj=R[am],Z=af.getValue([al,aj]);if(Z){var ae=Z[0],aa=Math.max(Math.sqrt((ae-ad.min)/(ad.max-ad.min))*40,5);g.appendSVG("circle","","main-chart").attr("cx",X(al)).attr("cy",V(aj)).attr("r",0).delay(200).animateSVG("r",aa,600).attr("data-xAxis",al).attr("data-yAxis",aj).click(a)}}}Q=function(){g.children(".main-chart").animateSVG("r",0,200,$.removeThis)}}function C(S,U,R,T){g.appendSVG("line","","main-axis").attr("x1",S).attr("y1",U).attr("x2",R).attr("y2",T).attr("opacity",0).delay(200).animateSVG("opacity",1,600)}function b(R,U,T,S){g.appendSVG("text","","main-axis-"+T).attr("x",R).attr("y",U).text(S).attr("opacity",0).delay(200).animateSVG("opacity",1,600)}function A(X,W,U,Y,R){var T=Y*2*Math.PI,V=R*2*Math.PI,S="";S+="M"+(X+U*Math.sin(T))+","+(W-U*Math.cos(T));S+="A"+U+", "+U;S+=(R-Y<0.5)?" 0 0,1 ":" 0 1,1 ";S+=(X+U*Math.sin(V))+","+(W-U*Math.cos(V));S+="L"+X+","+W+"Z";return S}function a(U){var R=$(this);if(U.ctrlKey){if(R.hasClassSVG("selected")){R.removeClassSVG("selected")}else{R.addClassSVG("selected")}}else{R.addClassSVG("selected");R.siblings(".main-chart").removeClassSVG("selected")}var T=[],V=$(".selected",e).attr("id")!="ChartScatter";$(".main-chart.selected").each(function(){var W=parseFloat($(this).attr("data-xAxis"));if(V){T.push(W)}else{dY=parseFloat($(this).attr("data-yAxis"));T.push(JSON.stringify([W,dY]))}});var S=function(X){var Y=X.children().eq(v.column).text(),aa=v.norm(Y);if(V){return(T.indexOf(aa)>-1)}else{var W=X.children().eq(m.column).text(),Z=m.norm(W);return(T.indexOf(JSON.stringify([aa,Z]))>-1)}};x(S)}};Scout.DesktopTableGraph=function(f,m,u){$graphContainer=m.empty().appendSVG("svg","GraphContainer");var g=120,d=60,b=1000,t=$graphContainer.width(),j=$graphContainer.height();var a=f.syncAjax("graph",u.outlineId,{nodeId:u.nodeId});graph=a.events[0].graph;for(var p=0;p<graph.links.length;p++){var e=graph.links[p];e.$div=$graphContainer.appendSVG("line",null,"graph-link");e.$divText=$graphContainer.appendSVG("text",null,"graph-link-text",e.label).attr("dy",-5)}for(var k=0;k<graph.nodes.length;k++){var o=graph.nodes[k];o.$div=$graphContainer.appendSVG("rect",null,"graph-node "+o.type).attr("width",g).attr("height",d).attr("x",0).attr("y",0).on("mousedown",h);o.$divText=$graphContainer.appendSVG("text",null,"graph-node-text",o.name).on("mousedown",h);v(o,Math.random()*(t-g),Math.random()*(j-d))}c();function v(C,A,z){var n=q(C,"x"),D=q(C,"y");C.$div.attr("x",n+A).attr("y",D+z);C.$divText.attr("x",n+A+g/2).attr("y",D+z+d/2);for(var w=0;w<graph.links.length;w++){var B=graph.links[w];if(B.source==C.id){B.$div.attr("x1",n+A+g/2).attr("y1",D+z+d/2);s(B)}else{if(B.target==C.id){B.$div.attr("x2",n+A+g/2).attr("y2",D+z+d/2);s(B)}}}}function s(y){var n=q(y,"x1"),x=q(y,"y1"),l=q(y,"x2"),w=q(y,"y2");y.$divText.attr("x",(n+l)/2).attr("y",(x+w)/2).attr("transform","rotate( "+(Math.atan((w-x)/(l-n))/Math.PI*180)+", "+((n+l)/2)+", "+((x+w)/2)+")")}function c(){var H=0;for(var z=0;z<graph.nodes.length;z++){var A=graph.nodes[z],M=q(A,"x"),L=q(A,"y");dx=0,dy=0;if(A.type=="center"){dx+=((t-g)/2-M)/40;dy+=((j-d)/2-L)/40}dx-=(Math.min(M,5)-5)/2;dy-=(Math.min(L,5)-5)/2;dx+=(Math.min(t-g-M,10)-10)/4;dy+=(Math.min(j-d-L,10)-10)/4;dx+=((t-g)/2-M)/500;dy+=((j-d)/2-L)/500;for(var w=0;w<graph.nodes.length;w++){var C=graph.nodes[w];if(w!=z){var G=q(C,"x"),F=q(C,"y"),E=100/(Math.pow(M-G,2)+Math.pow(L-F,2));dx+=(M-G)*E;dy+=(L-F)*E}}for(var B=0;B<graph.links.length;B++){var K=graph.links[B],J=null;if(K.source===A.id){J=graph.nodes[K.target]}else{if(K.target===A.id){J=graph.nodes[K.source]}}if(J){otherX=q(J,"x");otherY=q(J,"y");var I=Math.sqrt(Math.pow(M-otherX,2)+Math.pow(L-otherY,2)),D=Math.log(I/260)/10;dx-=(M-otherX)*D;dy-=(L-otherY)*D}}v(A,dx,dy);H+=Math.abs(dx)+Math.abs(dy)}if(b-->0){setTimeout(c,0)}}function h(A){var x=A.pageX,w=A.pageY,y;for(var C=0;C<graph.nodes.length;C++){var z=graph.nodes[C];if($(this).is(z.$div)||$(this).is(z.$divText)){y=graph.nodes[C]}}$("body").on("mousemove","",B).one("mouseup","",l);return false;function B(n){v(y,n.pageX-x,n.pageY-w);x=n.pageX;w=n.pageY;b=0}function l(n){$("body").off("mousemove");b=200;c()}}function q(l,n){return parseFloat(l.$div.attr(n))}};Scout.DesktopTableHeader=function(f,d){var a=0;for(var c=0;c<d.length;c++){var b=f.appendDiv("","header-item",d[c].label).data("type",d[c].type).css("width",d[c].width);if(d[c].width===0){b.hide()}a+=d[c].width;b.appendDiv("","header-control","").on("click","",e);b.appendDiv("","header-resize","").on("mousedown","",g)}this.totalWidth=a;function g(p){var j=p.pageX-8,m=$(this).parent(),l=m.index()+1,o=m.width(),h=$(".table-row").first().width();$("body").addClass("col-resize").on("mousemove","",k).one("mouseup","",n);return false;function k(q){var s=q.pageX-j;if(o+s>80){m.css("width",o+s);$(".table-row > div:nth-of-type("+l+" )").css("width",o+s);$(".table-row").width(h+s)}}function n(q){$("body").off("mousemove").removeClass("col-resize")}}function e(k){var j=$(this),h=j.offset().left,l=j.offset().top;new Scout.MenuHeader(h,l)}};Scout.DesktopTableMap=function(q,A,F,E,t){$mapContainer=A.empty().appendSVG("svg","MapContainer").attrSVG("viewBox","5000 -100000 200000 83000").attrSVG("preserveAspectRatio","xMidYMid");var e=q.syncAjax("map",F.outlineId,{nodeId:F.nodeId});var J=e.events[0].map;var f=J.objects.countries.geometries;var d=[];for(var D=0;D<F.columns.length;D++){if(F.columns[D].type=="geo"){for(var w=0;w<E.length;w++){var B=E[w][D];if(d.indexOf(B)==-1){d.push(B)}}}}for(var G=0;G<f.length;G++){var k=f[G].arcs,z="";for(var H=0;H<k.length;H++){var C=(typeof k[H][0]!="number")?k[H][0]:k[H],j=[];for(var I=0;I<C.length;I++){var m=(C[I]<0),l=m?~C[I]:C[I],g=[],o,n;for(var u=0;u<J.arcs[l].length;u++){var p=J.arcs[l][u];if(u===0){if((f[G].id=="Russland")&&(p[0]<3000)){p[0]+=100000}o=p[0];n=p[1]}else{if(Math.abs(p[0])>8000){p[0]=0}o+=p[0];n+=p[1]}g.push((o*2)+","+(-n))}g=m?g.reverse():g;j=$.merge(j,g)}z+="M"+j.join("L")+"Z"}var h=$mapContainer.appendSVG("path",f[G].id,"map-item").attr("d",z).click(v);if(d.indexOf(f[G].id)>-1){h.addClassSVG("has-data")}}function v(s){var b=$(this);if(s.ctrlKey){if(b.hasClassSVG("selected")){b.removeClassSVG("selected")}else{b.addClassSVG("selected")}}else{b.addClassSVG("selected");b.siblings(".selected").removeClassSVG("selected")}var a=[];$(".map-item.selected").each(function(){a.push($(this).attr("id"))});var c=function(x){for(var K=0;K<F.columns.length;K++){var y=x.children().eq(K).text();if(a.indexOf(y)>-1){return true}}return false};t(c)}};Scout.DesktopTableOrganize=function(j,a,h,d,m){var g=j.syncAjax("dataModel",h.outlineId,{nodeId:h.nodeId}),l=g.events[0].dataModel;a.empty();var n=a.appendDiv("OrganizeColumn"),f=a.appendDiv("OrganizeCommand");for(var k=0;k<d.length;k++){var b=d[k];if(b.type=="key"){continue}$column=n.appendDiv("","column-item",b.label).data("column",k);$column.appendDiv("","column-command move-down");$column.appendDiv("","column-command move-up");$column.appendDiv("","column-separator");$column.appendDiv("","column-command change");$column.appendDiv("","column-command remove");$column.appendDiv("","column-command add");$column.appendDiv("","column-separator");$column.appendDiv("","column-command filter");$column.appendDiv("","column-separator");$column.appendDiv("","column-command sort-down");$column.appendDiv("","column-command sort-up")}e("Datenblatt",m);function e(p,x){var q="data:application/vnd.ms-excel;base64,",w='<html xmlns:o="urn:schemas-microsoft-com:office:office"xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--><meta http-equiv="content-type" content="text/plain; charset=UTF-8"/></head><body><table>{table}</table></body></html>';var t="<table><tr>";for(var u=0;u<d.length;u++){var s=h.columns[u];if(s.type=="key"){continue}t+='<td style="font-weight: bold;">'+s.label+"</td>"}t+="</tr>";for(var o=0;o<x.length;o++){t+="<tr>";for(var u=0;u<d.length;u++){var s=h.columns[u],v=x[o][u];if(s.type=="key"){continue}if(s.type=="int"){v=$.numberToString(parseFloat(v),0)}if(s.type=="float"){v=$.numberToString(parseFloat(v),2)}t+="<td>"+v+"</td>"}t+="</tr>"}t+="</table>";w=w.replace("{worksheet}",p).replace("{table}",t);w=window.btoa(unescape(encodeURIComponent(w)));window.location.href=q+w}};Scout.DesktopToolButton=function(g,f,k){var h=f.appendDiv("DesktopTools");for(var d=0;d<k.length;d++){var a=k[d].state||"",j=k[d].icon||"",b=k[d].shortcut||"";var c=h.appendDiv(k[d].id,"tool-item "+a,k[d].label).attr("data-icon",j).attr("data-shortcut",b);if(!c.hasClass("disabled")){c.on("click","",e)}}h.appendDiv("DesktopDialogs");this.$div=h;function e(m){var l=$(this);$(".tool-open").animateAVCSD("width",0,$.removeThis,null,500);if(l.hasClass("selected")){l.removeClass("selected")}else{l.selectOne();$("#DesktopTools").beforeDiv("","tool-open").animateAVCSD("width",300,null,null,500)}}};Scout.DesktopTree=function(g,e){var c=e.appendDiv("DesktopTree");var l=c.appendDiv("DesktopTreeScroll");var m=new Scout.Scrollbar(l,"y");var k=this;c.appendDiv("DesktopTreeResize").on("mousedown","",j);this.$div=l;this.addNodes=d;this.clearNodes=h;this.outlineId;function j(p){$("body").addClass("col-resize").on("mousemove","",n).one("mouseup","",o);function n(s){var q=s.pageX+11;c.width(q);c.next().width("calc(100% - "+(q+80)+"px)").css("left",q)}function o(q){$("body").off("mousemove").removeClass("col-resize")}return false}function h(){this.$div.find("div").remove()}function d(o,s){var v=$("");for(var t=o.length-1;t>=0;t--){var q=o[t];var n="";if(q.expanded){n="expanded "}if(!q.leaf){n+="can-expand "}level=s?s.data("level")+1:0;var p=$.makeDiv(q.id,"tree-item "+n,q.text).on("click","",b).data("bench",q.bench).attr("data-level",level).css("margin-left",level*20).css("width","calc(100% - "+(level*20+20)+"px)");var w=p.appendDiv("","tree-item-control").on("click","",a);if(p.hasClass("expanded")){w.css("transform","rotate(90deg)")}p.appendDiv("","tree-item-menu").on("click","",f);if(s){p.insertAfter(s)}else{p.appendTo(l)}v=v.add(p);if(q.children){var u=d(q.children,p);v=v.add(u)}}return v}function b(o){var s=$(this),p=s.data("bench"),t=s.attr("id");s.selectOne();if(s.hasClass("can-expand")&&!s.hasClass("expanded")){var v=g.syncAjax("drilldown",k.outlineId,{nodeId:t});var n=d(v.events[0].nodes,s);if(n.length){n.wrapAll('<div id="TreeItemAnimate"></div>)');var w=n.height()*n.length,y=function(){$(this).replaceWith($(this).contents());m.initThumb()};$("#TreeItemAnimate").css("height",0).animateAVCSD("height",w,y,m.initThumb);var x=s.children(".tree-item-control"),u=function(z,A){x.css("transform","rotate("+z+"deg)")},q=function(){s.addClass("expanded")};x.css("borderSpacing",0).animateAVCSD("borderSpacing",90,q,u)}}$("#DesktopBench").html("");if(p.type=="table"){p.nodeId=t;p.outlineId=k.outlineId;new Scout.DesktopTable(g,$("#DesktopBench"),p)}else{$("#DesktopBench").text(JSON.stringify(p))}}function a(q){var p=$(this).parent(),s=p.attr("data-level");if(!p.hasClass("expanded")){return true}p.selectOne().removeClass("expanded");p.nextUntil(function(){return $(this).attr("data-level")<=s}).wrapAll('<div id="TreeItemAnimate"></div>)');$("#TreeItemAnimate").animateAVCSD("height",0,$.removeThis,m.initThumb);var o=p.children(".tree-item-control"),n=function(t,u){o.css("transform","rotate("+t+"deg)")};o.css("borderSpacing",90).animateAVCSD("borderSpacing",0,null,n);return false}function f(p){var o=$(this),q=o.parent().attr("id"),n=o.offset().left,s=o.offset().top;new Scout.Menu(g,k.outlineId,q,n,s)}};Scout.DesktopViewButton=function(a,f,e){a.widgetMap[e.id]=this;var g="";if(e.selected){g="selected"}var c=f.appendDiv(e.id,"view-item "+g,e.text);c.on("click","",h);function h(k){c.selectOne();var j=a.syncAjax("click",$(this).attr("id"));a.processEvents(j.events)}this.onModelPropertyChange=function d(j){if(j.selected!==undefined){if(j.selected){c.selectOne()}return}};this.onModelAction=function b(j){}};Scout.DesktopViewButtonBar=function(a,f,e){var c=f.appendDiv("DesktopViews");for(var d=0;d<e.length;d++){new Scout.DesktopViewButton(a,c,e[d])}c.appendDiv("ViewAdd").on("click","",b);c.appendDiv("ViewLogo").delay(1000).animateAVCSD("width",55,null,null,1000);this.$div=c;function b(j){var g=c.children(".selected").text().split("(");var k=g.length>1?parseInt(g[1],0)+1:2;var h={id:"ownView"+k,text:g[0]+" ("+k+")"};new Scout.DesktopViewButtonOwn(a,c,h)}};Scout.DesktopViewButtonOwn=function(e,a,g){e.widgetMap[g.id]=this;var d=$("#ViewAdd").beforeDiv("","view-item view-own",g.text);d.on("click","",f).appendDiv("","view-remove").on("click","",j).selectOne();var h=d.width();d.css("width",0).animateAVCSD("width",h);function f(k){d.selectOne()}function j(k){$(this).parent().animateAVCSD("width",0,$.removeThis).prev().click();return false}this.onModelPropertyChange=function b(k){if(k.selected!==undefined){if(k.selected){d.selectOne()}return}};this.onModelAction=function c(k){}};Scout.Menu=function(h,b,d,l,k){$("#MenuSelect, #MenuControl").remove();var e=h.syncAjax("menu",b,{nodeId:d});if(e.events.length===0){return}var c=e.events[0].menus;var j=$("body").appendDiv("MenuSelect").css("left",l+28).css("top",k-3);var g=$("body").appendDiv("MenuControl").css("left",l-7).css("top",k-3);for(var f=0;f<c.length;f++){if(c[f].icon){j.appendDiv("","menu-button").attr("data-icon",c[f].icon).attr("data-label",c[f].label).hover(function(){$("#MenuButtonsLabel").text($(this).data("label"))},function(){$("#MenuButtonsLabel").text("")})}else{j.appendDiv("","menu-item",c[f].label)}}$(".menu-button").wrapAll('<div id="MenuButtons"></div>');$("#MenuButtons").appendDiv("MenuButtonsLabel");var n=j.offset().top;menuHeight=j.height(),windowHeight=$(window).height();if(n+menuHeight>windowHeight){j.css("top",n-menuHeight+27)}var m=j.css("width");j.css("width",0).animateAVCSD("width",m);$("*").one("mousedown keydown mousewheel",a);function a(o){j.animateAVCSD("width",0,function(){g.remove();j.remove()});return true}};Scout.MenuHeader=function(a,e){var d=$("body").appendDiv("MenuHeader").css("left",a-6).css("top",e-10);d.appendDiv("MenuHeaderControl");d.appendDiv("MenuHeaderSortUp");d.appendDiv("MenuHeaderSortDown");d.appendDiv("MenuHeaderFilter");d.appendDiv("MenuHeaderAdd");d.appendDiv("MenuHeaderMore");var c=d.css("height");d.css("height",32).animateAVCSD("height",c);$("*").one("mousedown keydown mousewheel",b);function b(f){d.animateAVCSD("height",32,$.removeThis);return true}};Scout.Scrollbar=function(m,c){var d=(c==="x"?"left":"top"),f=(c==="x"?"Width":"Height"),b=0,k=0,g;var h=m.beforeDiv("","scrollbar"),o=h.appendDiv("","scrollbar-thumb");m.parent().on("DOMMouseScroll mousewheel","",n);o.on("mousedown","",e);h.on("mousedown",j);$(window).on("load resize",l);this.initThumb=l;function l(){var v=m[0]["offset"+f],p=m[0]["scroll"+f],u=parseFloat(h.css("margin-top")),t=parseFloat(m.css(d));if(v-t>=p){t=Math.min(0,-p+v);m.stop().animateAVCSD(d,t)}var q=Math.max(v*v/p-u*2,30),s=v-q-u*2;o.css(f.toLowerCase(),q);k=q/2;o.css(d,t/(v-p)*s);if(v>=p){h.css("visibility","hidden")}else{h.css("visibility","visible")}g=function(w){var y=o.offset()[d]-h.offset()[d],x=Math.min(s,Math.max(0,y+w));m.css(d,(v-p)/s*x);o.css(d,x)}}function n(q){q=q.originalEvent||window.event.originalEvent;var p=q.wheelDelta?-q.wheelDelta/4:q.detail*30;g(p);return false}function e(p){b=(c==="x"?p.pageX:p.pageY)-o.offset()[d];o.addClass("scrollbar-thumb-move");$(document).on("mousemove",j).one("mouseup",a);return false}function j(q){b=b===0?k:b;var p=(c==="x"?q.pageX:q.pageY)-o.offset()[d];g(p-b)}function a(){o.removeClass("scrollbar-thumb-move");$(document).off("mousemove");return false}};$(document).ready(function(){var a=""+new Date().getTime();$(".scout").each(function(){var b=$(this).data("partid")||"0",d=[b,a].join(".");var c=new Scout.Session($(this),d);c.init()})});