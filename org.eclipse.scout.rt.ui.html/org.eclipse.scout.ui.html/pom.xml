<?xml version="1.0" encoding="UTF-8"?>
<!--
   Copyright (c) 2014 BSI Business Systems Integration AG.
   All rights reserved. This program and the accompanying materials
   are made available under the terms of the BSI AG Software License v1.0
   which accompanies this distribution as bsi-v10.html

-->
<project
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
  xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>org.eclipse.scout.rt.ui.html</groupId>
    <artifactId>org.eclipse.scout.rt.ui.html</artifactId>
    <version>4.0.0-SNAPSHOT</version>
  </parent>

  <artifactId>org.eclipse.scout.ui.html</artifactId>
  <packaging>eclipse-plugin</packaging>

  <build>
    <plugins>

      <!-- DEV ONLY!!! -->
      <!--
      <plugin>
        <groupId>org.eclipse.tycho</groupId>
        <artifactId>tycho-packaging-plugin</artifactId>
        <configuration>
          <timestampProvider>jgit</timestampProvider>
          <jgit.dirtyWorkingTree>warning</jgit.dirtyWorkingTree>
        </configuration>
      </plugin>
       -->

      <plugin>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.6</version>
        <executions>
          <execution>
            <phase>package</phase>
            <configuration>
              <target>
                <property name="process_script_dir" value="${project.build.directory}/process_script" />
                <property name="compile_classpath" refid="maven.compile.classpath" />
                <mkdir dir="${process_script_dir}" />
                <exec dir="${project.basedir}" executable="java" failonerror="true">
                  <arg line="-classpath ${compile_classpath}" />
                  <arg line="org.eclipse.scout.ui.html.ScriptProcessor" />
                  <arg line="--i ${project.basedir}/WebContent/res/scout-4.0.0.css" />
                  <arg line="--o ${process_script_dir}/scout-4.0.0.css" />
                  <arg line="--root ${project.basedir}" />
                </exec>
                <exec dir="${project.basedir}" executable="java" failonerror="true">
                  <arg line="-classpath ${compile_classpath}" />
                  <arg line="org.eclipse.scout.ui.html.ScriptProcessor" />
                  <arg line="--i ${project.basedir}/WebContent/res/scout-4.0.0.js" />
                  <arg line="--o ${process_script_dir}/scout-4.0.0.js" />
                  <arg line="--root ${project.basedir}" />
                </exec>
              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>net.alchim31.maven</groupId>
        <artifactId>yuicompressor-maven-plugin</artifactId>
        <version>1.4.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>compress</goal>
            </goals>
          </execution>
        </executions>
        <configuration>
          <nosuffix>false</nosuffix>
          <suffix>.min</suffix>
          <sourceDirectory>${project.build.directory}/process_script</sourceDirectory>
          <outputDirectory>${project.build.directory}/WebContent/res</outputDirectory>
        </configuration>
      </plugin>

    </plugins>
  </build>

</project>
