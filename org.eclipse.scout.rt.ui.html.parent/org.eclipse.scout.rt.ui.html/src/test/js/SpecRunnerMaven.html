<!DOCTYPE html>
<!--
  This spec runner is used by the maven build.
  You can use it too while developing by executing
  mvn jasmine:bdd and connecting to http://localhost:8234/ with your browser.
  When using mvn verify, the server is started on http://localhost:64600/.
  //FIXME we need to find a better way to manage dependencies. At the moment we have to include the files at 3 different places.
  //FIXME Encoding in embedded jetty (started by jasmine-maven-plugin) is wrong!
 -->
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  $if(autoRefresh)$
  <meta http-equiv="refresh" content="$autoRefreshInterval$">
  $endif$
  <title>Jasmine Spec Runner</title>
  <script type="text/javascript">
    window.onerror = function(msg,url,line) {
      if (document.head) {
        var jserror = document.head.getAttribute('jmp_jserror') || '';
        if (jserror) {
          jserror += ':!:';
        }
        jserror += msg;
        document.head.setAttribute('jmp_jserror',jserror);
      }
    };
  </script>
  <link rel="shortcut icon" type="image/png" href="WebContent/res/jasmine-2.0.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="WebContent/res/jasmine-2.0.0/jasmine.css">

  <script type="text/javascript" src="WebContent/res/jquery-2.1.0.js"></script>
  <script type="text/javascript" src="WebContent/res/jquery-ui-1.11.2.js"></script>
  <script type="text/javascript" src="WebContent/res/log4javascript.js"></script>
  <script type="text/javascript" src="WebContent/res/jasmine-2.0.0/jasmine.js"></script>
  <script type="text/javascript" src="WebContent/res/jasmine-2.0.0/jasmine-html.js"></script>
  <script type="text/javascript" src="WebContent/res/jasmine-2.0.0/boot.js"></script>
  <script type="text/javascript" src="WebContent/res/jasmine-2.0.0/plugins/jasmine-jquery.js"></script>
  <script type="text/javascript" src="WebContent/res/jasmine-2.0.0/plugins/mock-ajax.js"></script>
  <script type="text/javascript" src="src/main/js/jasmine/JasmineScoutModuleUtil.js"></script>
  <script type="text/javascript" src="src/main/js/jasmine/JasmineScout.js"></script>
  <script type="text/javascript" src="src/main/js/jasmine/JasmineMavenReporter.js"></script>
  <script type="text/javascript" src="src/main/js/jasmine/boot.ext.js"></script>

  <script type="text/javascript">loadDynamicScript('src/main/js/scout-module.js');</script>

  <script type="text/javascript" src="src/main/js/desktop/BreadCrumbNavigation.js"></script>
  <script type="text/javascript" src="src/main/js/desktop/MobileDesktop.js"></script>
  <script type="text/javascript" src="src/main/js/table/MobileTable.js"></script>
  <script type="text/javascript" src="src/main/js/util/mobileObjectFactories.js"></script>

  <script type="text/javascript">
    <!-- This is usually done in index.html, but here, we have to do it manually -->
    scout.logging.init();

    jQuery.ajax({
      async: false,
      type: 'GET',
      dataType: 'text',
      contentType: 'text/plain; charset=UTF-8',
      cache: false,
      url: 'WebContent/res/defaultValues.json',
      data: ''
    }).done(function(data) {
      var dataWithoutComments = stripCommentsFromJson(data),
        dataObj = JSON.parse(dataWithoutComments);
      scout.defaultValues._loadDefaultsConfiguration(dataObj);
    }).fail(function(jqXHR, textStatus, errorThrown) {
      throw new Error('Error while loading default values: ' + errorThrown);
    });
  </script>

  $specScriptTags$
</head>
<body>
  <!-- Test for UTF-8 encoding: äöü -->
</body>
</html>
